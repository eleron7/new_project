{% extends 'main.html' %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>푸드셰어 - 푸드맵</title>
	<link rel="stylesheet" href="maps/maps.css">
</head>
<body>
	
<!-- 기본 템플릿 안에 삽입될 내용 Start -->
	{% block content %}
	{% load static %}
	<link rel="stylesheet" href="{% static 'maps/maps.css' %}">
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=6c38c968663a510d4e417699bab92920"></script>
	<div id="map" style="width:100vw; height:83vh;"></div>
	<script>
		var mapContainer = document.getElementById('map'), // 지도의 중심좌표
    	mapOption = { 
    	    center: new daum.maps.LatLng(35.855751, 128.491765), // 지도의 중심좌표
    	    level: 3 // 지도의 확대 레벨 
    	}; 

		var map = new daum.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
		var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";
			imageSize = new kakao.maps.Size(30, 45),
			imageOption = {}; 


		var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
    		markerPosition = new kakao.maps.LatLng(35.85562078288393, 128.48783774665353); // 마커가 표시될 위치입니다

// 마커를 생성합니다
		var marker = new kakao.maps.Marker({
			map: map,
    		position: markerPosition, 
    		image: markerImage // 마커이미지 설정 
		});

// 마커가 지도 위에 표시되도록 설정합니다
		// marker.setMap(map);  

		var content_m = '<div class="wrap">' + 
            '    <div class="info">' + 
            '        <div class="title">' + 
            '            <div class="close" onclick="closeOverlay_me()" title="닫기"></div>' + 
            '        </div>' + 
            '        <div class="body">' + 
            '            <div class="desc-mine">' + 
            '                <div><a href="{% url "share:index" %}" target="_self" class="link link-mine">모집하기!</a></div>' + 
            '            </div>' + 
            '        </div>' + 
            '    </div>' +    
            '</div>';  

		var overlay_me = new daum.maps.CustomOverlay({
			content: content_m,
			map: map,
			position: marker.getPosition()       
		});
		daum.maps.event.addListener(marker, 'click', function() {
			overlay_me.setMap(map);
		});
		function closeOverlay_me() {
			overlay_me.setMap(null);     
		}

		// 지도에 마커를 표시합니다 
		var marker1 = new daum.maps.Marker({
		    map: map, 
		    position: new daum.maps.LatLng(35.856673, 128.493181)
		});

		var marker2 = new daum.maps.Marker({
		    map: map, 
		    position: new daum.maps.LatLng(35.856047, 128.494833)
		});

		var marker3 = new daum.maps.Marker({
		    map: map, 
		    position: new daum.maps.LatLng(35.855395, 128.492709)
		});

		// var marker_me = new kakao.maps.Marker({
        // 	map: map, // 마커를 표시할 지도
        // 	position: new daum.maps.LatLng(35.855708, 128.491770),
        // 	image : markerImage // 마커 이미지 
    	// });

		// 커스텀 오버레이에 표시할 컨텐츠 입니다
		// 커스텀 오버레이는 아래와 같이 사용자가 자유롭게 컨텐츠를 구성하고 이벤트를 제어할 수 있기 때문에
		// 별도의 이벤트 메소드를 제공하지 않습니다 
		var content1 = '<div class="wrap">' + 
            '    <div class="info">' + 
            '        <div class="title">' + 
            '            치킨 먹을사람 구합니다!' + 
            '            <div class="close" onclick="closeOverlay1()" title="닫기"></div>' + 
            '        </div>' + 
            '        <div class="body">' + 
            '            <div class="img">' +
            '                <img src="http://cfile181.uf.daum.net/image/250649365602043421936D" width="73" height="70">' +
            '           </div>' + 
            '            <div class="desc">' + 
            '                <div class="ellipsis">제주특별자치도 제주시 첨단로 242</div>' + 
            '                <div class="jibun ellipsis">(우) 63309 (지번) 영평동 2181</div>' + 
            '                <div><a href="http://www.kakaocorp.com/main" target="_blank" class="link">홈페이지</a></div>' + 
            '            </div>' + 
            '        </div>' + 
            '    </div>' +    
            '</div>';
		var content2 = '<div class="wrap">' + 
            '    <div class="info">' + 
            '        <div class="title">' + 
            '            저녁엔 족발이죠!' + 
            '            <div class="close" onclick="closeOverlay2()" title="닫기"></div>' + 
            '        </div>' + 
            '        <div class="body">' + 
            '            <div class="img">' +
            '                <img src="http://cfile181.uf.daum.net/image/250649365602043421936D" width="73" height="70">' +
            '           </div>' + 
            '            <div class="desc">' + 
            '                <div class="ellipsis">제주특별자치도 제주시 첨단로 242</div>' + 
            '                <div class="jibun ellipsis">(우) 63309 (지번) 영평동 2181</div>' + 
            '                <div><a href="http://www.kakaocorp.com/main" target="_blank" class="link">홈페이지</a></div>' + 
            '            </div>' + 
            '        </div>' + 
            '    </div>' +    
            '</div>';    
		var content3 = '<div class="wrap">' + 
            '    <div class="info">' + 
            '        <div class="title">' + 
            '            6시까지! 피자조각 나눔!' + 
            '            <div class="close" onclick="closeOverlay3()" title="닫기"></div>' + 
            '        </div>' + 
            '        <div class="body">' + 
            '            <div class="img">' +
            '                <img src="http://cfile181.uf.daum.net/image/250649365602043421936D" width="73" height="70">' +
            '           </div>' + 
            '            <div class="desc">' + 
            '                <div class="ellipsis">제주특별자치도 제주시 첨단로 242</div>' + 
            '                <div class="jibun ellipsis">(우) 63309 (지번) 영평동 2181</div>' + 
            '                <div><a href="http://www.kakaocorp.com/main" target="_blank" class="link">홈페이지</a></div>' + 
            '            </div>' + 
            '        </div>' + 
            '    </div>' +    
            '</div>';  
		
			// 마커 위에 커스텀오버레이를 표시합니다
			// 마커를 중심으로 커스텀 오버레이를 표시하기위해 CSS를 이용해 위치를 설정했습니다
			var overlay1 = new daum.maps.CustomOverlay({
			    content: content1,
			    map: map,
			    position: marker1.getPosition()
			});

			var overlay2 = new daum.maps.CustomOverlay({
			    content: content2,
			    map: map,
			    position: marker2.getPosition()       
			});

			var overlay3 = new daum.maps.CustomOverlay({
			    content: content3,
			    map: map,
			    position: marker3.getPosition()       
			});
			// 마커를 클릭했을 때 커스텀 오버레이를 표시합니다
			daum.maps.event.addListener(marker1, 'click', function() {
			    overlay1.setMap(map);
			});

			daum.maps.event.addListener(marker2, 'click', function() {
			    overlay2.setMap(map);
			});
			
			daum.maps.event.addListener(marker3, 'click', function() {
			    overlay3.setMap(map);
			});
			// 커스텀 오버레이를 닫기 위해 호출되는 함수입니다 
			function closeOverlay1() {
			    overlay1.setMap(null);     
			}

			function closeOverlay2() {
			    overlay2.setMap(null);     
			}

			function closeOverlay3() {
			    overlay3.setMap(null);     
			}
		
	</script>
	{% endblock %}
	
</body>
</html>